\RequirePackage{float}      % Для положения в месте задания
\RequirePackage{setspace}   % Для интервалов

% ГОСТ 7.32. Пункт 6.5.1:
% Иллюстрации (чертежи, графики, схемы, компьютерные распечатки, 
% диаграммы, фотоснимки) следует располагать в отчете непосредственно после 
% текста отчета, где они упоминаются впервые, или на следующей странице 
% (по возможности ближе к соответствующим частям текста отчета). 
\def\fps@figure{htp}

% ГОСТ 7.32. Пункт 6.5.4:
% Иллюстрации, за исключением иллюстраций, приведенных в приложениях, следует 
% нумеровать арабскими цифрами сквозной нумерацией. Если рисунок один, то он 
% обозначается: Рисунок 1.
\newcounter{figure} % Счётчик иллюстраций
\renewcommand\thefigure{\@arabic\c@figure} % Арабские цифры

\RequirePackage{caption}    % Настройка подписи
\captionsetup[figure]{
    % ГОСТ 7.32-2017. Пункт 6.5.7:
    % Слово "Рисунок", его номер и через тире наименование помещают после 
    % пояснительных данных и располагают 
    % в центре под рисунком без точки в конце.
    name=Рисунок,
    labelsep=endash, % Тире
    position=below,
    justification=centering, % Выравнивание по центру    
    % ГОСТ 7.32-2017. Пункт 6.5.8:
    % Если наименование рисунка состоит из нескольких строк, 
    % то его следует записывать через один межстрочный интервал.
    font={stretch=\setspace@singlespace},    
    width=0.8\linewidth, % Ограничение по длине, а то будет на всю строку
}

\def\ftype@figure{1}
\def\ext@figure{lof}        % Добавление в список иллюстраций

% Среда русинка
\newenvironment{figure}
    {\@float{figure}\centering}
    {\end@float}
\newenvironment{figure*}
    {\@dblfloat{figure}}
    {\end@dblfloat}
