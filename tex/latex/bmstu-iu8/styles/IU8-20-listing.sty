% Author: CatInCosmicSpace
\NeedsTeXFormat{LaTeX2e}[1995/12/01]
\ProvidesPackage{IU8-20-listing}[2024/10/28 v1.5 Листинги]

\RequirePackage{listings}
\RequirePackage{xcolor}

% http://latexcolor.com/
\definecolor{seashell}{rgb}{1.0, 0.96, 0.93}

\lstdefinestyle{IU8}{
    frame=single,
    % backgroundcolor=\color{seashell},
    commentstyle=\color{blue},
    keywordstyle=\color{magenta},
    basicstyle=\ttfamily\footnotesize,
    breakatwhitespace=false,         
    breaklines=true,                 
    captionpos=tl,
    keepspaces=false,                  
    showspaces=false,                
    showstringspaces=false,
    showtabs=false,         
    extendedchars=\true,         
    tabsize=2,
}
\lstset{style=IU8}

\DeclareCaptionFormat{listing}{#1#2#3}
\captionsetup[lstlisting]{
    format=listing,
    singlelinecheck=false,
    labelsep=endash,
}

\newcommand{\listing}[2][]{%
    \lstinputlisting[caption={\texttt{\detokenize{#2}}},#1]{#2}%
}

\lstnewenvironment{codelisting}[1][]
{
\lstset{
    frame=single,
    % backgroundcolor=\color{seashell},
    commentstyle=\color{blue},
    keywordstyle=\color{magenta},
    basicstyle=\ttfamily\footnotesize,
    breakatwhitespace=false,         
    breaklines=true,                 
    captionpos=tl,
    keepspaces=false,                  
    showspaces=false,                
    showstringspaces=false,
    showtabs=false,         
    extendedchars=\true,         
    tabsize=2,
    #1
}
}
{}